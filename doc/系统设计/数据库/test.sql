use meteor;

INSERT INTO `def_file_sys` VALUES (100, 110, 100, '导入数据源ods_pay_log', 'ImportKafka', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.ImportKafkaTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.importqueue.ImportKafkaTask\",\r\n  \"regTable\" : \"ods_pay_log\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"rePartitionNum\" : \"0\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"groupId\" : \"meteor_pay_log\",\r\n  \"topics\" : \"ods_pay_log\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"retryInterval\" : \"0\",\r\n  \"brokers\" : \"11.11.11.11:9092,22.22.22.22:9092,33.33.33.33:9092\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-8 19:27:52', '2018-3-10 10:56:14', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (101, 110, 100, '生成dwd_pay_log_tmp', 'SqlTask', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.SqlTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.buildmodel.SqlTask\",\r\n  \"repartition\" : \"0\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"sql\" : \"cache table dwd_pay_log_tmp as\\r\\nselect key as product, split(value, \'|\') value_arr\\r\\nfrom ods_pay_log\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:41:38', '2018-3-10 10:56:19', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (102, 110, 100, '生成dwd_pay_log', 'SqlTask', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.SqlTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.buildmodel.SqlTask\",\r\n  \"repartition\" : \"0\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"sql\" : \"cache table dwd_pay_log as\\r\\nselect product, value_arr[0] uid, value_arr[1] stime, value_arr[2] game, value_arr[3] server, \\r\\n\\tcast(value_arr[4] as bigint) pay_coin,\\r\\n\\tt2.dp_platform as platform, \\r\\n\\tdate_format(value_arr[1], \'yyyyMMdd\') stime_yyyyMMdd, \\r\\n\\tdate_format(value_arr[1], \'yyyyMMddHH\') stime_yyyyMMddHH, \\r\\n\\tdate_format(value_arr[1], \'yyyyMMddHHmm\') stime_yyyyMMddHHmm,\\r\\n\\tcast(1 as bigint) one_num\\r\\nfrom dwd_pay_log_tmp t1\\r\\nLATERAL VIEW json_tuple(c_join(\'rediss_multil0\', \'dim.dim_product\', t1.product, true, true), \'platform\') t2 as dp_platform\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:42:37', '2018-3-10 10:56:25', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (103, 110, 100, '基于天统计', 'SqlTask', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.SqlTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.buildmodel.SqlTask\",\r\n  \"repartition\" : \"0\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"sql\" : \"csql_group_by_n:\\r\\nselect stime, stime_yyyyMMdd, platform, product, game, server,\\r\\n\\tc_count_distinct(\'rediss_multil0\', \'redis_platform_uv\', key(stime_yyyyMMdd, platform), value(uid), 5000, ${DateUtils2.expireAtDay(1, 0, 50)}, 0) platform_uv,\\r\\n\\tc_sum(\'rediss_multil0\', \'redis_product_count\', stime_yyyyMMdd, key(product), one_num, 5000, ${DateUtils2.expireAtDay(1, 0, 50)}) product_count,\\r\\n\\tc_sum(\'rediss_multil0\', \'redis_game_server_pay_sum\', stime_yyyyMMdd, key(game, server), pay_coin, 5000, ${DateUtils2.expireAtDay(1, 0, 50)}) game_server_pay_sum,\\r\\n\\tc_max(\'rediss_multil0\', \'redis_game_server_pay_max\', stime_yyyyMMdd, key(game, server), pay_coin, 5000, ${DateUtils2.expireAtDay(1, 0, 50)}) game_server_pay_max,\\r\\n\\tc_min(\'rediss_multil0\', \'redis_game_server_pay_min\', stime_yyyyMMdd, key(game, server), pay_coin, 5000, ${DateUtils2.expireAtDay(1, 0, 50)}) game_server_pay_min,\\r\\n\\tc_max_top_n(\'rediss_multil0\', \'redis_game_server_top_20\', key(stime_yyyyMMdd, game), server, pay_coin, 20, 5000, ${DateUtils2.expireAtDay(1, 0, 50)}) game_server_top_20\\r\\nfrom dwd_pay_log\\r\\ngroup by stime_yyyyMMdd, platform, product, game, server\\r\\n;\\r\\ncache table dm_day_stat as\\r\\nselect MAX(stime) stime, stime_yyyyMMdd, platform, product, game, server,\\r\\n\\tMAX(platform_uv) platform_uv,\\r\\n\\tMAX(product_cnt) product_count,\\r\\n\\tMAX(game_server_pay_sum) game_server_pay_sum,\\r\\n\\tMAX(game_server_pay_max) game_server_pay_max,\\r\\n\\tMAX(game_server_pay_min) game_server_pay_min,\\r\\n\\tMAX(game_server_top_20) game_server_top_20\\r\\nfrom $targetTable\\r\\ngroup by stime_yyyyMMdd, platform, product, game, server\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:43:55', '2018-3-10 10:56:29', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (104, 110, 100, '输出kafka_yyyyMMdd_platform', 'ExportKafka', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.ExportKafkaTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.export.ExportKafkaTask\",\r\n  \"toTopic\" : \"yyyyMMdd_platform\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"fetchSql\" : \"select MAX(stime) stime, stime_yyyyMMdd, platform, \\r\\n\\tMAX(platform_uv) platform_uv\\r\\nfrom dm_day_stat\\r\\ngroup by stime_yyyyMMdd, platform\",\r\n  \"toBrokers\" : \"11.11.11.11:9092,22.22.22.22:9092,33.33.33.33:9092\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:45:25', '2018-3-10 10:56:34', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (105, 110, 100, '输出kafka_yyyyMMdd_product', 'ExportKafka', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.ExportKafkaTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.export.ExportKafkaTask\",\r\n  \"toTopic\" : \"yyyyMMdd_product\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"fetchSql\" : \"select MAX(stime) stime, stime_yyyyMMdd, product,\\r\\n\\tMAX(product_cnt) product_count\\r\\nfrom dm_day_stat\\r\\ngroup by stime_yyyyMMdd, product\",\r\n  \"toBrokers\" : \"11.11.11.11:9092,22.22.22.22:9092,33.33.33.33:9092\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:46:23', '2018-3-10 10:56:39', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (106, 110, 100, '输出kafka_yyyyMMdd_game_server', 'ExportKafka', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.ExportKafkaTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.export.ExportKafkaTask\",\r\n  \"toTopic\" : \"yyyyMMdd_game_server\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"fetchSql\" : \"select MAX(stime) stime, stime_yyyyMMdd, game, server,\\r\\n\\tMAX(game_server_pay_sum) game_server_pay_sum,\\r\\n\\tMAX(game_server_pay_max) game_server_pay_max,\\r\\n\\tMAX(game_server_pay_min) game_server_pay_min,\\r\\n\\tMAX(game_server_top_20) game_server_top_20\\r\\nfrom dm_day_stat\\r\\ngroup by stime_yyyyMMdd, game, server\",\r\n  \"toBrokers\" : \"11.11.11.11:9092,22.22.22.22:9092,33.33.33.33:9092\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:46:59', '2018-3-10 10:56:43', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (107, 110, 100, '维度表', 'Dir', '{\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.other.Dir\"\r\n}', 1, '2099-1-1 00:00:00', NULL, '', 1, '2018-3-10 10:47:16', '2018-3-10 10:56:08', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (108, 107, 100, '5点至23点每小时45分运行一次', 'Cron', '{\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.CronTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.cron.CronTask\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"priority\" : \"2\",\r\n  \"retryInterval\" : \"0\",\r\n  \"cronExp\" : \"0 45/60 * * * ?\"\r\n}', 0, '2019-3-10 10:48:44', NULL, '', 1, '2018-3-10 10:48:44', '2018-3-10 10:48:44', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (109, 107, 100, '同步mysql dim_product至redis', 'Mysql2Redis', '{\r\n  \"tableKeys\" : \"platform,product\",\r\n  \"programClass\" : \"com.duowan.meteor.server.executor.ShellTaskExecutor\",\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.importredis.ImportMysqlToRedisTask\",\r\n  \"redisMultiName\" : \"rediss_multil0\",\r\n  \"mysqlPassword\" : \"123456789\",\r\n  \"columns\" : \"platform,product,product_name\",\r\n  \"mysqlUrl\" : \"jdbc:mysql://123.123.123.123:3306/dim?useUnicode=true&characterEncoding=utf8\",\r\n  \"beginSleepTime\" : \"0\",\r\n  \"mysqlUser\" : \"test\",\r\n  \"priority\" : \"2\",\r\n  \"fetchSql\" : \"select platform, product, product_name\\r\\nfrom dim_product\",\r\n  \"expireSeconds\" : \"86400\",\r\n  \"maxRetryTimes\" : \"2\",\r\n  \"isIgnoreError\" : \"0\",\r\n  \"table\" : \"dim.dim_product\",\r\n  \"threadPoolSize\" : \"1\",\r\n  \"finishSleepTime\" : \"0\",\r\n  \"retryInterval\" : \"0\"\r\n}', 0, '2099-1-1 00:00:00', 'chenwu', '', 1, '2018-3-10 10:52:19', '2018-3-10 10:52:19', 'chenwu', 'chenwu');
INSERT INTO `def_file_sys` VALUES (110, 0, 100, 'test', 'Dir', '{\r\n  \"CLASS\" : \"com.duowan.meteor.model.view.other.Dir\"\r\n}', 1, '2099-1-1 00:00:00', NULL, '', 1, '2018-3-10 10:56:01', '2018-3-10 10:56:01', 'chenwu', 'chenwu');

INSERT INTO `def_depend` VALUES (101, 100, 100, NULL, 1, '2018-3-10 10:41:38', '2018-3-10 10:41:38', 'chenwu', 'chenwu');
INSERT INTO `def_depend` VALUES (102, 101, 100, NULL, 1, '2018-3-10 10:52:26', '2018-3-10 10:52:26', 'chenwu', 'chenwu');
INSERT INTO `def_depend` VALUES (103, 102, 100, NULL, 1, '2018-3-10 10:43:55', '2018-3-10 10:43:55', 'chenwu', 'chenwu');
INSERT INTO `def_depend` VALUES (104, 103, 100, NULL, 1, '2018-3-10 10:45:25', '2018-3-10 10:45:25', 'chenwu', 'chenwu');
INSERT INTO `def_depend` VALUES (105, 103, 100, NULL, 1, '2018-3-10 10:46:23', '2018-3-10 10:46:23', 'chenwu', 'chenwu');
INSERT INTO `def_depend` VALUES (106, 103, 100, NULL, 1, '2018-3-10 10:46:59', '2018-3-10 10:46:59', 'chenwu', 'chenwu');
INSERT INTO `def_depend` VALUES (109, 108, 100, NULL, 1, '2018-3-10 10:52:19', '2018-3-10 10:52:19', 'chenwu', 'chenwu');
